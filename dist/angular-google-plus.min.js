/*! angular-google-plus - v0.1.0 2013-10-19 */
!function(a,b){"use strict";var c={};b.module("googleplus",[]).provider("GooglePlus",[function(){c.clientId=null,this.setClientId=function(a){return c.clientId=a,this},this.getClientId=function(){return c.clientId},c.apiKey=null,this.setApiKey=function(a){return c.apiKey=a,this},this.getApiKey=function(){return c.apiKey},c.scopes="https://www.googleapis.com/auth/plus.login",this.setScopes=function(a){return c.scopes=a,this},this.getScopes=function(){return c.scopes},this.init=function(a){b.extend(c,a)},this.$get=["$q","$rootScope",function(b,c){var d=b.defer(),e=function(){};return e.prototype.login=function(){return gapi.auth.authorize({client_id:clientId,scope:scopes,immediate:!1},this.handleAuthResult),d.promise},e.prototype.checkAuth=function(){gapi.auth.authorize({client_id:clientId,scope:scopes,immediate:!0},this.handleAuthResult)},e.prototype.handleClientLoad=function(){gapi.client.setApiKey(apiKey),gapi.auth.init(function(){}),a.setTimeout(this.checkAuth,1)},e.prototype.handleAuthClick=function(){return gapi.auth.authorize({client_id:clientId,scope:scopes,immediate:!1},this.handleAuthResult),!1},e.prototype.handleAuthResult=function(a){if(a&&!a.error){var b={};gapi.client.load("oauth2","v2",function(){var a=gapi.client.oauth2.userinfo.get();a.execute(function(a){b.email=a.email,b.uid=a.id,d.resolve(b),c.$apply()})})}else d.reject("error")},new e}]}]).run([function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://apis.google.com/js/client.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}])}(window,angular);